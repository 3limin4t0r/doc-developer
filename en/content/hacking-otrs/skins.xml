<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<!-- $Id: skins.xml,v 1.2 2010-08-16 10:13:18 mg Exp $ -->

<section id="skins">
    <title>Skins</title>
    <para>
        Since OTRS 3.0, the visual appearance of OTRS is controlled by "skins".
    </para>
    <para>
        A skin is a set of CSS and image files, which together control how the GUI is
        presented to the user. Skins do not change the HTML content that is generated by OTRS
        (this is what "Themes" do), but they control how it is displayed. With the help
        of modern CSS standards it is possible to change the display thoroughly (e.g.
        repositioning parts of dialogs, hiding elements, ...).
    </para>

    <section>
        <title>Skin Basics</title>

        <para>
            All skins are in <filename>$OTRS_HOME/var/httpd/htdocs/skins/$SKIN_TYPE/$SKIN_NAME</filename>.
            There are two types of skins: agent and customer skins.
        </para>

        <para>
            Each of the agents can select individually, which of the installed agent skins they want to "wear".
        </para>

        <para>
            For the customer interface, a skin has to be selected globally with the config setting
            <literal>Loader::Customer::SelectedSkin</literal>. All customers will see this skin.
        </para>
    </section>

    <section>
        <title>How skins are loaded</title>

        <para>
            It is important to note that the "default" skin will <emphasis>always</emphasis> be loaded <emphasis>first</emphasis>.
            If the agent selected another skin than the "default" one, then the other one will be loaded only
            <emphasis>after</emphasis> the default skin. By "loading" here we mean that OTRS will put tags into the HTML content
            which cause the CSS files to be loaded by the browser. Let's see an example of this:

            <programlisting><![CDATA[
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css-cache/CommonCSS_179376764084443c181048401ae0e2ad.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/ivory/css-cache/CommonCSS_e0783e0c2445ad9cc59c35d6e4629684.css" />
<!--/CommonCSS-->
            ]]></programlisting>

            Here it can clearly be seen that the default skin is loaded first, and then the custom skin specified
            by the agent. In this example, we see the result of the activated loader (<literal>Loader::Enabled</literal>
            set to 1), which gathers all CSS files, concatenates and minifies them and serves them as one chunk to the
            browser. This saves bandwith and also reduces the number of HTTP requests. Let's see the same example with the
            Loader turned off:

            <programlisting><![CDATA[
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Reset.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Default.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Header.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewControl.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewSmall.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewMedium.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.OverviewLarge.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Footer.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Grid.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Form.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Table.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Widget.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.WidgetMenu.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.TicketDetail.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Tooltip.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Dialog.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Print.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Agent.CustomerUser.GoogleMaps.css" />
<!--/CommonCSS-->
<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/default/css/Core.Agent.CustomerUser.OpenTicket.css" />
<!--/CommonCSS-->

<!--CommonCSS-->
    <link rel="stylesheet" href="/otrs-web/skins/Agent/ivory/css/Core.Dialog.css" />
<!--/CommonCSS-->
            ]]></programlisting>

            Here we can better see the individual files that come from the skins.
        </para>

        <para>
            There are different types of CSS files: common files which must always be loaded,
            and "module-specific" files which are only loaded for special modules within the OTRS
            framework.
        </para>

        <para>
            In addition, it is possible to specify CSS files which only must be loaded on IE7 or
            IE8 (in the case of the customer interface, also IE6). This is unfortunate, but it was
            not possible to develop a modern GUI on these browsers without having special CSS for them.
        </para>

        <para>
            For details regarding the CSS file types, please see the <link linkend="loader">section on the Loader</link>.
        </para>

        <para>
            For each HTML page generation, the loader will first take all configured CSS files from the
            default skin, and then for each file look if it is also available in a custom skin (if a custom
            skin is selected) and load them after the default files.
        </para>

        <para>
            That means a) that CSS files in custom skins need to have the same names as in the default skins,
            and b) that a custom skin does not need to have all files of the default skin. That is the big
            advantage of loading the default skin first: a custom skin has all default CSS rules present
            and only needs to change those which should result in a different display. That can often be
            done in a single file, like in the example above.
        </para>
    </section>

    <section>
        <title>Creating a New Skin</title>
        <para></para>
    </section>
</section>
