<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<!-- $Id: config-mechanism.xml,v 1.5 2005-08-17 15:28:27 rk Exp $ -->

<chapter>
    <title>Config Mechanism</title>
    <sect1 id="default-config">
        <title>Default Config</title>
        <para>
            There are different default config files. The main one which comes with the
            framework is:
        </para>
        <para>
            <filename>Kernel/Config/Defaults.pm</filename>
        </para>
        <para>
            This tile ahould leave untouched because it gets updated on framework updates.
            There are also a sub directory where you can put your own default config files
            of our on modules. This files are used automatically.
        </para>
        <para>
            This directory is located under:
        </para>
        <para>
            <filename class="directory">$OTRS_HOME/Kernel/Config/Defaults/Files/*.pm</filename>
        </para>
        <para>And could look like the following:</para>
        <para>
            <filename>Kernel/config/Files/Calendar.pm</filename>
        </para>
        <programlisting format="linespecific">
            # module reg and nav bar
            $Self->{'Frontend::Module'}->{'AgentCalendar'} = {
                Description => 'Calendar',
                NavBarName => 'Ticket',
                NavBar => [
                    {
                        Description => 'Calendar',
                        Name => 'Calendar',
                        Image => 'calendar.png',
                        Link => 'Action=AgentCalendar',
                        NavBar => 'Ticket',
                        Prio => 5000,
                        AccessKey => 'c',
                    },
                ],
            };

            # show online customers
            $Self->{'Frontend::NotifyModule'}->{'80-ShowCalendarEvents'} = {
                Module => 'Kernel::Output::HTML::NotificationCalendar',
            };
        </programlisting>
    </sect1>
    <sect1 id="custom-config">
        <title>Custom Config</title>
        <para>
            If you need to change a config option, copy it to
        </para>
        <para>
            <filename>Kernel/Config.pm</filename>
        </para>
        <para>
            and set the new option. This file will be used at least and so all default config
            options are overwritten with your settings.
        </para>
        <para>
            This way it's easy to handle updates, you just need the Kernel/Config.pm.
        </para>
    </sect1>
    <sect1 id="accessing-config-options">
        <title>Accessing config options</title>
        <para>
            You can access (read and write) config options via the core module "Kernel::Config".
            The config object is base object and so already available in each frontend modules.
        </para>
        <para>
            If you want to get a config option:
        </para>
        <programlisting format="linespecific">
            my $ConfigOption = $Self->{ConfigObject}->Get('Prefix::Option');
        </programlisting>
        <para>
            If you want to change a config option at runtime and just for this one request/process:
        </para>
        <programlisting format="linespecific">
            $Self->{ConfigObject}->Set(
                Key => 'Prefix::Option'
                Value => 'SomeNewValue',
            );
        </programlisting>
    </sect1>
</chapter>